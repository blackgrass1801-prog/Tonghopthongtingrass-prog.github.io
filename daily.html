<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Nháº­p dá»¯ liá»‡u Äáº¡i lÃ½</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gray-100 flex items-center justify-center">
  <div class="glass soft-shadow rounded-2xl p-6 w-full max-w-lg">
    <h2 class="text-xl font-bold mb-4">ğŸ“Œ Nháº­p dá»¯ liá»‡u Äáº¡i lÃ½</h2>

    <label>Äáº¡i lÃ½</label>
    <input id="daily" class="w-full border p-2 rounded mb-3" placeholder="Nháº­p tÃªn Ä‘áº¡i lÃ½">

    <label>Ná»™i dung</label>
    <textarea id="noiDung" class="w-full border p-2 rounded mb-3" placeholder="Nháº­p ná»™i dung"></textarea>

    <label>NhÃ¢n viÃªn</label>
    <input id="employee" class="w-full border p-2 rounded mb-3" placeholder="Nháº­p tÃªn nhÃ¢n viÃªn">

    <label>Xá»­ lÃ½</label>
    <input id="xuLy" class="w-full border p-2 rounded mb-3" placeholder="Tráº¡ng thÃ¡i xá»­ lÃ½">

    <label>Chá»n file (áº¢nh/Excel)</label>
    <input type="file" id="file" class="mb-3">

    <button onclick="submitData()" class="bg-green-600 text-white px-4 py-2 rounded">ğŸ“¤ Upload</button>
  </div>

  <script>
    async function submitData() {
      const daily = document.getElementById("daily").value;
      const noiDung = document.getElementById("noiDung").value;
      const employee = document.getElementById("employee").value;
      const xuLy = document.getElementById("xuLy").value;
      const fileInput = document.getElementById("file").files[0];

      let fileData = "", fileName = "", mimeType = "";
      if (fileInput) {
        fileName = fileInput.name;
        mimeType = fileInput.type;
        const reader = new FileReader();
        fileData = await new Promise((resolve) => {
          reader.onload = e => resolve(e.target.result.split(",")[1]);
          reader.readAsDataURL(fileInput);
        });
      }

      fetch("https://script.google.com/macros/s/AKfycbxhcotw2glL0CSKzm_AH51U1OUjP4v_a204djzCgCPpAdNa3VruXkMen-y9P2aL5aU/exec", {
        method: "POST",
        body: JSON.stringify({ daily, noiDung, employee, xuLy, fileName, mimeType, base64: fileData }),
        headers: { "Content-Type": "application/json" }
      })
      .then(res => res.json())
      .then(() => alert("âœ… ÄÃ£ lÆ°u thÃ nh cÃ´ng!"))
      .catch(() => alert("âŒ Lá»—i khi lÆ°u dá»¯ liá»‡u!"));
    }
  </script>
</body>
</html>
<!-- TÃ¬m kiáº¿m Dá»¯ liá»‡u -->
<section class="max-w-2xl mx-auto glass soft-shadow rounded-2xl p-6 my-10">
  <h2 class="text-xl font-bold mb-4">ğŸ” TÃ¬m kiáº¿m Dá»¯ liá»‡u</h2>
  
  <label for="searchDaily">TÃ¬m theo Äáº¡i lÃ½:</label>
  <input id="searchDaily" class="w-full border p-2 rounded mb-3" placeholder="Nháº­p tá»« khÃ³a Ä‘áº¡i lÃ½">

  <label for="searchNoiDung">TÃ¬m theo Ná»™i dung:</label>
  <input id="searchNoiDung" class="w-full border p-2 rounded mb-3" placeholder="Nháº­p tá»« khÃ³a ná»™i dung">

  <button onclick="searchData()" class="bg-green-600 text-white px-4 py-2 rounded">
    ğŸ” TÃ¬m kiáº¿m
  </button>

  <!-- Káº¿t quáº£ -->
  <div id="searchResults" class="mt-4 text-sm text-slate-700"></div>
</section>

<script>
async function searchData() {
  const searchDaily = document.getElementById("searchDaily").value.trim().toLowerCase();
  const searchNoiDung = document.getElementById("searchNoiDung").value.trim().toLowerCase();

  // âš ï¸ DÃ¡n URL Web App Script giá»‘ng nhÆ° pháº§n Upload
  const res = await fetch("https://script.google.com/macros/s/AKfycbxhcotw2glL0CSKzm_AH51U1OUjP4v_a204djzCgCPpAdNa3VruXkMen-y9P2aL5aU/exec");
  const data = await res.json();

  // Lá»c káº¿t quáº£
  const results = data.filter(row => {
    return (
      (!searchDaily || row.daily.toLowerCase().includes(searchDaily)) &&
      (!searchNoiDung || row.noiDung.toLowerCase().includes(searchNoiDung))
    );
  });

  // Hiá»ƒn thá»‹
  let html = "";
  if (results.length > 0) {
    html = `<ul class="list-disc pl-6">` + results.map(r => `
      <li><b>Äáº¡i lÃ½:</b> ${r.daily} | <b>Ná»™i dung:</b> ${r.noiDung} | 
      <b>NhÃ¢n viÃªn:</b> ${r.employee} | <b>Xá»­ lÃ½:</b> ${r.xuLy}</li>
    `).join("") + `</ul>`;
  } else {
    html = "<p class='text-red-600'>âŒ KhÃ´ng tÃ¬m tháº¥y dá»¯ liá»‡u phÃ¹ há»£p</p>";
  }

  document.getElementById("searchResults").innerHTML = html;
}
</script>
